<!DOCTYPE html>
<html>
  <head>
    <title>Sorting – Sort[101] – Helps students learn sorting</title>

        <meta charset="utf-8" />
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0'>

    
    <meta name="description" content="Helps students learn sorting">
    <meta property="og:description" content="Helps students learn sorting" />
    
    <meta name="author" content="Sort[101]" />

    
    <meta property="og:title" content="Sorting" />
    <meta property="twitter:title" content="Sorting" />
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

    <!--[if lt IE 9]>
      <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet">
    <link rel="alternate" type="application/rss+xml" title="Sort[101] - Helps students learn sorting" href="/feed.xml" />
    <link href='http://fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,400italic,500,500italic,700,700italic,900,900italic' rel='stylesheet' type='text/css'>

  </head>

  <body>
    
    <div class="intro-header">
        <div class="wrapper-masthead">
         <div class="container">
           <header class="masthead clearfix">
             <div class="site-info">
               <h1 class="site-name"><a href="/">Sort[101]</a></h1>
               <p class="site-description">Helps students learn sorting</p>
             </div>
             <nav>
               <a href="/">Home</a>
               <a href="/about">About</a>
               <a href="/sorting">Sorting</a>
             </nav>
           </header>
         </div>
       </div>

    </div>

    <div id="main" role="main" class="container">
      <article class="page">

  <h1>Sorting</h1>

  <div class="entry">
     <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

<script>
	google.charts.load('current', { packages: ['corechart', 'bar'] });
	//google.charts.setOnLoadCallback(init);

	var data, chart, options, colors, chart_div;

	function chart_init() {
		data = new google.visualization.DataTable();
		chart = new google.visualization.ColumnChart(chart_div);

		data.addColumn('number', 'Index');
		data.addColumn('number', 'Val');
		data.addColumn({ type: 'string', role: 'style' });
		options = {
			animation: {
				startup: true,
				duration: 100,
				easing: 'linear'
			},
			legend: {
				position: 'none'
			},
			hAxis: {
				baselineColor: 'transparent',
				gridlineColor: 'transparent',
				textPosition: 'none'
			}
		};
		chart.draw(data, options);
	}

	function swap(a, b) {
		if (a < 0 || b < 0) {
			err("Swapping must have positive indexes!");
			return;
		} else if (a >= array.length || b >= array.length) {
			err("One of the indexes is above the max index, " + array.length-1);
			return;
		}
		var tmp = array[a];
		array[a] = array[b];
		array[b] = tmp;
		_colors[a] = SWAP_COLOR;
		_colors[b] = SWAP_COLOR;
	}

	function insert(index, val) {
		if (index < 0) {
			err("Inserting must have positive index!");
			return;
		} else if (index > array.length) {
			err("Insert index is greater than max index, " + array.length);
			return;
		}
		array.splice(index, 0, val);
		_num++;
	}

	function del(index) {
		if (index < 0) {
			err("Delete must have positive index!");
			return;
		} else if (index > array.length) {
			err("Delete index is greater than max index, " + array.length);
			return;
		}
		array.splice(index, 1);
		_num--;
	}

	function move(from, to) {
		if (from < 0 || to < 0) {
			err("Move must have positive index!");
			return;
		} else if (from > array.length || to > array.length) {
			err("Move index is greater than max index, " + array.length);
			return;
		}
		var tmp = array[from];
		del(from);
		insert(to, tmp);
	}


	function append(val) {
		insert(length, val);
	}

	function draw() {
		if (_vis) {
			updateArray();
			chart.draw(data, options);
		}
	}


	function updateArray() {
		var ci = 0;
		if (data.Tf.length != _num) {
			data.removeRows(0, data.Tf.length);

			for (r in array) {
				valid_color = "color: ";
				if (_colors.length >= ci) {
					valid_color += DEFAULT_COLOR;
				} else {
					valid_color += _colors[ci];
				}
				data.addRow([ci++, array[ci], valid_color]);
			}
		} else {
			for (r in array) {
				//data.addRow([ci++, array[r]]);
				data.setValue(ci, 1, array[ci]);
				data.setValue(ci, 2, "color: " + _colors[ci]);
				ci++;
			}
		}
	}

</script>

<script>

  google.charts.setOnLoadCallback(init);

  /*
  
  Colors
  
  */

  DEFAULT_COLOR = "035329";
  NOT_SORTED_COLOR = "c40000";
  SWAP_COLOR = "0000df";

  _noswitch_colors = [SWAP_COLOR];


  // returns a shuffled array
  function shuffle(array) {
    var currentIndex = array.length, temporaryValue, randomIndex;

    while (0 !== currentIndex) {

      randomIndex = Math.floor(Math.random() * currentIndex);
      currentIndex -= 1;

      temporaryValue = array[currentIndex];
      array[currentIndex] = array[randomIndex];
      array[randomIndex] = temporaryValue;
    }

    return array;
  }
  // input, output divs
  var inp, out;

  // settings variables
  var lo_lim, hi_lim, _num, _int, _vis, _autorun;

  // returns true if the array is sorted, false otherwise.
  function isSorted() {
    var last_x = -Infinity;
    for (x in array) {
      if (array[last_x] > array[x]) {
        _colors[x] = NOT_SORTED_COLOR;
        _colors[last_x] = NOT_SORTED_COLOR;
        return false;
      } else {
        _colors[x] = DEFAULT_COLOR;
        _colors[last_x] = DEFAULT_COLOR;
      }
      last_x = x;
    }
    return true;
  }

  // called right before displaying the result of an algorithm
  // If the array is not sorted, values which are out of place are colored NOT_SORTED_COLOR, SORTED_COLOR otherwise
  function finalize() {
    var last_x = -Infinity;
    var ret = true;
    function color_mac(index, color) {
      if (!_noswitch_colors.includes(_colors[index])) {
        _colors[index] = color;
      }
    }
    for (x in array) {
      if (array[last_x] > array[x]) {
        color_mac(x, NOT_SORTED_COLOR);
        color_mac(last_x, NOT_SORTED_COLOR);
        ret = false;
      } else {
        color_mac(x, DEFAULT_COLOR);
        color_mac(last_x, DEFAULT_COLOR);
      }
      last_x = x;
    }
    return ret;

  }

  // initialization function for the library
  function init() {
    getDefaults();
    updateSettings();

    inp = document.getElementById("inp");
    out = document.getElementById("output");
    chart_div = document.getElementById('chart_div');


    inp.value = getCookie("last");

    out.scrollTop = out.scrollHeight;

    chart_init();

    resetArray();

    draw();
  }

  // user values, int, and then booleans
  vals = ["lo_lim", "hi_lim", "_num", "_autorun"];

  function updateSettings() {
    for (val in vals) {
      eval(vals[val] + " = parseInt(" + $("#" + vals[val]).val() + ")");
      createCookie(vals[val], $("#" + vals[val]).val())
    }
    _vis = $('#_vis').is(":checked")
    createCookie("VISS", (_vis) ? "t" : "f")
    _int = $('#_int').is(":checked")
    createCookie("INT", (_int) ? "t" : "f")

    if (_vis) {
      $("#chart_div").show();
    } else {
      $("#chart_div").hide();
    }

  }

  function getDefaults() {
    for (val in vals) {
      $("#" + vals[val]).keyup(reset)
      if (getCookie(vals[val])) {
        $("#" + vals[val]).val(getCookie(vals[val]));
      }
    }
    $("#_vis").change(reset)
    $("#_int").change(reset)

    if (getCookie("VISS")) {
      $("#_vis").prop('checked', getCookie("VISS") == "t");
    }
    if (getCookie("INT")) {
      $("#_int").prop('checked', getCookie("INT") == "t");
    }
  }

  function runScript(e) {
    if ((e.keyCode == 10 || e.keyCode == 13) && (e.ctrlKey || e.metaKey)) {
      run();
      e.preventDefault();
      return false;
    }
    if (e.which == 9 || e.tabKey) {
      e.preventDefault();
      return false;
    }
  }

  function resetColors() {
    _colors = [];
    for (_i = 0; _i < _num; ++_i) {
      _colors.push(DEFAULT_COLOR);
    }
  }

  function resetArray() {
    _first = [];
    for (_i = 0; _i < _num; ++_i) {
      to_add = Math.random() * (1 + hi_lim - lo_lim) + lo_lim;
      if (_int) to_add = Math.round(to_add);
      _first.push(to_add);
    }
    resetColors();
    array = shuffle(_first);
    length = array.length;
    updateArray();
  }

  function finalize_autorun() {
    var last_x = -Infinity;
    var ret = true;
    function color_mac(index, color) {
        _colors[index] = color;
    }
    for (x in array) {
      if (array[last_x] > array[x]) {
        color_mac(x, NOT_SORTED_COLOR);
        color_mac(last_x, NOT_SORTED_COLOR);
        ret = false;
      } else {
        color_mac(x, DEFAULT_COLOR);
        color_mac(last_x, DEFAULT_COLOR);
      }
      last_x = x;
    }
    write("Autorun time took: " + (eautotime - sautotime) + "ms");
    draw();
  }
  _is_running = false, c_autorun = false, sautotime = 0, eautotime = 0, _autorun_fresh = true;
  function start_autorun() {
    if (_is_running) {
      clearInterval(c_autorun);
    }
    eautotime = performance.now();
    c_autorun = setInterval(function () {
        if (!isSorted()) {
          run()
        } else if (_autorun_fresh) {
          _autorun_fresh = false;
          finalize_autorun()
        }
      }, _autorun);
    _is_running = true;
  }

  function stop_autorun() {
    if (_is_running) {
      clearInterval(c_autorun);
    }
    eautotime = performance.now();

    finalize_autorun();
    _is_running = false;
  }

  function toggle_autorun() {
    if (_is_running) {
      stop_autorun();
    } else {
      start_autorun();
    }
  }

  function run() {
    //updateSettings();
    //resetArray();

    resetColors();
    _autorun_fresh = true;
    out.value = "";
    createCookie("last", inp.value);
    var tnow, tend;
    tnow = performance.now();
    eval(inp.value);
    tend = performance.now();
    write("Took: " + (tend - tnow) + "ms");
    write("Is sorted: " + finalize());
    draw();
  }

  function reset() {
    updateSettings();
    resetArray();

    out.value = "";
    array = shuffle(_first);
    draw();
  }
  function err(text) {
    write("ERROR: " + text);
  }
  function write(text) {
    out.value = out.value + text + "\n";
  }

  var example_code = ["/* \n\
 \n\
 Sort[101] Example Code: Bubble sort \n\
 \n\
 Time complexity: O(n^2), space complexity: O(n) \n\
 \n\
*/ \n\
 \n\
while (!isSorted()) { \n\
  for (i = 0; i < length-1; i++) { \n\
    if (array[i] > array[i+1]) { \n\
      swap(i, i+1); \n\
    } \n\
  } \n\
}",
    "/* \n\
 \n\
 Sort[101] Example Code: Bubble sort animation\n\
 \n\
 Time complexity: O(n^2), space complexity: O(n) \n\
 \n\
 To run, hit the 'autorun' button\n\
\n\
*/\n\
\n\
for (i = 0; i < length-1; i++) { \n\
  if (array[i] > array[i+1]) { \n\
    swap(i, i+1); \n\
  } \n\
}"
  ];


  function changeExample(thing) {
    inp.value = example_code[parseInt(thing.value)];
  }

  var createCookie = function (name, value) {
    value = value.replace(/(?:\r\n|\r|\n)/g, '__n_no_var');
    value = value.replace(/(?:\;)/g, '__s_no_var');
    document.cookie = name + "=" + value + ";";
  }

  function getCookie(c_name) {
    if (document.cookie.length > 0) {
      c_start = document.cookie.indexOf(c_name + "=");
      if (c_start != -1) {
        c_start = c_start + c_name.length + 1;
        c_end = document.cookie.indexOf(";", c_start);
        if (c_end == -1) {
          c_end = document.cookie.length;
        }
        return unescape(document.cookie.substring(c_start, c_end)).replace(/__n_no_var/g, "\n").replace(/__s_no_var/g, ";");
      }
    }
    return "";
  }
</script>

Examples: <select id="exampledata" onchange="changeExample(this);">
      <option value="">SELECT</option>
      <option value="0">Bubble Sort</option>
      <option value="1">Bubble Sort (Animated)</option>
</select>

<a onclick="$('#sett').toggle(); if (!$('#sett').is(':visible')) { reset(); };"><img src="/images/gear.png" class="settingsgear"></a>


<div id="sett" hidden="true" class="settings">
      Lower Limit: <input id="lo_lim" type="int" value="0"/> <br/>
      Upper Limit: <input id="hi_lim" type="int" value="10"/> <br/>
      Amount: <input id="_num" type="int" value="10"/> <br/>
      Autorun delay: <input id="_autorun" type="int" value="500"/> <br/>
      Integer only?: <input id="_int" type="checkbox"/> <br/>
      Show visualization?: <input id="_vis" type="checkbox" checked/> <br/>
      <!--  
            We don't need this anymore, because they autoupdate
            <button id="apply" onclick="reset();" class="button">Apply</button> -->
</div>

<br/>
<br/>
<br/>


<div id="chart_div" style="width: 100%; height: 15em;"></div>

Input:
<textarea id="inp" onkeypress="runScript(event)" class="inputcode"></textarea>

Output:
<textarea id="output" style="width: 100%; height: 6em; max-width: 100%" readonly></textarea>

<button id="reset" onclick="reset();" class="button">Reset</button>
<button id="run" onclick="run();" class="button">Run</button>
<button id="reset" onclick="toggle_autorun();" class="button">AutoRun</button>

  </div>
</article>

    </div>

    <div class="wrapper-footer">
      <div class="container">
        <footer class="footer">
            <div class="svg-icon">
          
<a href="mailto:codetn@knoxschools.us"><i class="icon-envelope icon-2x"></i></a>


<a href="https://github.com/cadebrown/codetn"><i class="icon-github icon-2x"></i></a>









            </div>
        </footer>
      </div>
    </div>

    

  </body>
</html>
